<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="no"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CreateStoryView.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">paths</a> &gt; <a href="index.source.html" class="el_package">edu.ntnu.idatt2001.View</a> &gt; <span class="el_source">CreateStoryView.java</span></div><h1>CreateStoryView.java</h1><pre class="source lang-java linenums">package edu.ntnu.idatt2001.View;

import edu.ntnu.idatt2001.Controller.CreateStoryController;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ListView;
import javafx.scene.control.TextField;
import javafx.scene.layout.Background;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;

import java.util.ArrayList;

public class CreateStoryView {
  //private final Stage stage;
  private final CreateStoryController controller;

  /*public CreateStoryView(Stage stage, CreateStoryController controller){
    this.stage = stage;
    this.controller = controller;
  }*/
  public Button errorIcon;
  public Label errorText;
  
<span class="nc" id="L29">  public CreateStoryView(CreateStoryController controller) {</span>
<span class="nc" id="L30">    this.controller = controller;</span>
<span class="nc" id="L31">  }</span>
  
  public Scene setup(){
    
    // -------------------- CREATE STORY SCENE --------------------
    // Top create story layout
<span class="nc" id="L37">    BorderPane createStoryTop = new BorderPane();</span>
<span class="nc" id="L38">    createStoryTop.setId(&quot;boxes&quot;);</span>
<span class="nc" id="L39">    Button goToCreateHomeStory = new Button(&quot; &quot;);</span>
<span class="nc" id="L40">    goToCreateHomeStory.getStyleClass().add(&quot;backButton&quot;);</span>
    //goToCreateHomeStory.setOnAction(e -&gt; openWindow.setScene(createGameScene));
<span class="nc" id="L42">    goToCreateHomeStory.setOnAction(e -&gt; {</span>
      try {
<span class="nc" id="L44">        controller.createGame();</span>
<span class="nc" id="L45">      } catch (Exception ex) {</span>
<span class="nc" id="L46">        throw new RuntimeException(ex);</span>
<span class="nc" id="L47">      }</span>
<span class="nc" id="L48">    });</span>
<span class="nc" id="L49">    VBox creatStoryTopMid = new VBox();</span>
<span class="nc" id="L50">    creatStoryTopMid.setId(&quot;boxes&quot;);</span>
<span class="nc" id="L51">      Label createStoryTitle = new Label(&quot;Create Story&quot;);</span>
<span class="nc" id="L52">      createStoryTitle.setId(&quot;createTitles&quot;);</span>
<span class="nc" id="L53">      Label createStoryUnderTitle = new Label(&quot;Select, edit or add your story to the library&quot;);</span>
<span class="nc" id="L54">      createStoryUnderTitle.setId(&quot;underTitle&quot;);</span>
<span class="nc" id="L55">    creatStoryTopMid.getChildren().addAll(createStoryTitle, createStoryUnderTitle);</span>
<span class="nc" id="L56">    createStoryTop.setLeft(goToCreateHomeStory);</span>
<span class="nc" id="L57">    createStoryTop.setCenter(creatStoryTopMid);</span>
    
    // Mid create story layout
<span class="nc" id="L60">    HBox createStoryMid = new HBox();</span>
<span class="nc" id="L61">    createStoryMid.setId(&quot;boxes&quot;);</span>
<span class="nc" id="L62">    VBox createStoryMidDisplay = new VBox();</span>
<span class="nc" id="L63">      createStoryMidDisplay.setId(&quot;boxes&quot;);</span>
<span class="nc" id="L64">      TextField displayStoryPath = new TextField();</span>
<span class="nc" id="L65">      displayStoryPath.setPromptText(&quot;Directory for story&quot;);</span>
<span class="nc" id="L66">      displayStoryPath.setMinHeight(20);</span>
<span class="nc" id="L67">      displayStoryPath.setEditable(false);</span>
<span class="nc" id="L68">      TextField displayBrokenLinks = new TextField();</span>
<span class="nc" id="L69">        displayBrokenLinks.setPromptText(&quot;Broken links&quot;);</span>
<span class="nc" id="L70">        displayBrokenLinks.setEditable(false);</span>
<span class="nc" id="L71">      ListView storyListView = new ListView&lt;&gt;();</span>
<span class="nc" id="L72">        ObservableList&lt;String&gt; observableList = FXCollections.observableList(new ArrayList&lt;String&gt;());</span>
<span class="nc" id="L73">        storyListView.setItems(observableList);</span>
<span class="nc" id="L74">        storyListView.setId(&quot;big-list-view&quot;);</span>
<span class="nc" id="L75">    createStoryMidDisplay.getChildren().addAll(displayStoryPath, displayBrokenLinks, storyListView);</span>
<span class="nc" id="L76">    VBox createStoryMidBtn = new VBox();</span>
<span class="nc" id="L77">    createStoryMidBtn.setId(&quot;boxes&quot;);</span>
<span class="nc" id="L78">      HBox errorBox = new HBox();</span>
<span class="nc" id="L79">      errorBox.setId(&quot;boxes&quot;);</span>
<span class="nc" id="L80">         errorIcon = new Button();</span>
<span class="nc" id="L81">          errorIcon.getStyleClass().add(&quot;invincible&quot;);</span>
<span class="nc" id="L82">         errorText = new Label(&quot;&quot;);</span>
<span class="nc" id="L83">          errorText.getStyleClass().add(&quot;invincible&quot;);</span>
<span class="nc" id="L84">    errorBox.getChildren().addAll(errorIcon, errorText);</span>
<span class="nc" id="L85">      Button selectStory = new Button(&quot;Select Story&quot;);</span>
<span class="nc" id="L86">      selectStory.setOnAction(actionEvent -&gt; {</span>
        try {
<span class="nc" id="L88">          controller.chooseStory();</span>
<span class="nc" id="L89">          errorInvisible();</span>
<span class="nc" id="L90">          observableList.addAll(controller.getStoryPassageNames());</span>
<span class="nc" id="L91">          displayStoryPath.setText(controller.getDirectory());</span>
<span class="nc" id="L92">          displayBrokenLinks.setText(controller.getBrokenLinks());</span>
<span class="nc" id="L93">        } catch (Exception e) {</span>
<span class="nc" id="L94">          errorVisable();</span>
<span class="nc" id="L95">        }</span>
<span class="nc" id="L96">      });</span>
<span class="nc" id="L97">    createStoryMidBtn.getChildren().addAll(selectStory, errorBox);</span>
<span class="nc" id="L98">    createStoryMid.getChildren().addAll(createStoryMidDisplay, createStoryMidBtn);</span>

    // Bottom create story layout
<span class="nc" id="L101">    HBox createStoryBottom = new HBox();</span>
<span class="nc" id="L102">    createStoryBottom.setId(&quot;boxes&quot;);</span>
<span class="nc" id="L103">      Button submit = new Button(&quot;Submit&quot;);</span>
<span class="nc" id="L104">      submit.setOnAction(e -&gt; {</span>
          try {
<span class="nc" id="L106">            controller.createGame();</span>
<span class="nc" id="L107">          } catch (Exception ex) {</span>
<span class="nc" id="L108">            errorVisable();</span>
<span class="nc" id="L109">          }</span>
<span class="nc" id="L110">      });</span>
<span class="nc" id="L111">    createStoryBottom.getChildren().addAll(submit);</span>

    
    // * Overall Create Story layout *
<span class="nc" id="L115">    BorderPane createStoryLayout = new BorderPane();</span>
<span class="nc" id="L116">    createStoryLayout.setTop(createStoryTop);</span>
<span class="nc" id="L117">    createStoryLayout.setCenter(createStoryMid);</span>
<span class="nc" id="L118">    createStoryLayout.setBottom(createStoryBottom);</span>
<span class="nc" id="L119">    Scene createStoryScene = new Scene(createStoryLayout, 1300, 700);</span>
<span class="nc" id="L120">    createStoryScene.getStylesheets().add(&quot;StyleSheets/createGameStyle.css&quot;);</span>
<span class="nc" id="L121">    return createStoryScene;</span>
  }

  public void errorInvisible(){
<span class="nc" id="L125">    errorText.setText(&quot;&quot;);</span>
<span class="nc" id="L126">    errorIcon.setBackground(Background.EMPTY);</span>
<span class="nc" id="L127">  }</span>
  public void errorVisable(){
<span class="nc" id="L129">    errorText.getStyleClass().add(&quot;errorText&quot;);</span>
<span class="nc" id="L130">    errorText.setText(&quot;Could not resolve file, try again...&quot;);</span>
<span class="nc" id="L131">    errorIcon.getStyleClass().add(&quot;errorImage&quot;);</span>
<span class="nc" id="L132">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>